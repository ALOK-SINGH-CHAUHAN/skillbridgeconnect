<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SkillBridge Connect - Modern Dashboard</title>
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Dashboard CSS -->
    <link rel="stylesheet" href="dashboard.css">
    
    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
</head>
<body>
    <!-- Glass Overlay for Mobile -->
    <div class="glass-overlay" id="glassOverlay"></div>
    
    <div class="app-container">
        <!-- Top Navigation Bar -->
        <nav class="top-navbar">
            <div class="nav-brand">
                <button class="mobile-menu-toggle" id="mobileMenuToggle">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="brand-icon">
                    <i class="fas fa-graduation-cap"></i>
                </div>
                <span>SkillBridge Connect</span>
            </div>
            <div class="nav-actions">
                <div class="user-profile" id="userProfile">
                    <span id="userInitials">S</span>
                </div>
            </div>
        </nav>
        
        <!-- Scroll Progress Indicator -->
        <div class="scroll-indicator">
            <div class="scroll-progress" id="scrollProgress"></div>
        </div>
        
        <!-- Modern Sidebar -->
        <nav class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fas fa-bridge"></i>
                </div>
            </div>
            
            <ul class="sidebar-nav">
                <li class="nav-item active" data-tooltip="Dashboard">
                    <a href="#" class="nav-link" data-page="dashboard">
                        <i class="fas fa-home"></i>
                    </a>
                </li>
                <li class="nav-item" data-tooltip="My Courses">
                    <a href="#" class="nav-link" data-page="courses">
                        <i class="fas fa-book-open"></i>
                    </a>
                </li>
                <li class="nav-item" data-tooltip="Learning Streak">
                    <a href="#" class="nav-link" data-page="streak">
                        <i class="fas fa-fire"></i>
                    </a>
                </li>
                <li class="nav-item" data-tooltip="Course Catalogue">
                    <a href="#" class="nav-link" data-page="catalogue">
                        <i class="fas fa-store"></i>
                    </a>
                </li>
            </ul>
            
            <div class="sidebar-footer">
                <div class="nav-item" data-tooltip="Settings">
                    <a href="#" class="nav-link" id="settingsBtn">
                        <i class="fas fa-cog"></i>
                    </a>
                </div>
                <div class="nav-item" data-tooltip="Logout">
                    <a href="#" class="nav-link" id="logoutBtn">
                        <i class="fas fa-sign-out-alt"></i>
                    </a>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content" id="mainContent">
            <!-- Dashboard Page -->
            <div class="page-content active" id="dashboardPage">
                <div class="page-header">
                    <h1 class="page-title">
                        <i class="fas fa-tachometer-alt"></i>
                        Dashboard
                    </h1>
                </div>
                
                <div class="welcome-section">
                    <div class="greeting-card">
                        <h2 class="greeting">Hello <span id="userName">Student</span>!</h2>
                        <p class="greeting-subtitle">Ready to continue your learning journey today?</p>
                    </div>
                    
                    <div class="progress-overview">
                        <div class="progress-circle-container">
                            <div class="progress-circle" data-progress="37">
                                <div class="progress-value">37%</div>
                            </div>
                            <span class="progress-label">Overall Progress</span>
                        </div>
                        
                        <div class="stats-grid">
                            <div class="stat-item">
                                <div class="stat-number" id="activeCourses">3</div>
                                <div class="stat-label">Active</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number" id="completedCourses">12</div>
                                <div class="stat-label">Completed</div>
                            </div>
                        </div>
                    </div>
                </div>

                <section class="recent-courses">
                    <h3 class="section-title">
                        <i class="fas fa-history"></i>
                        Recently Viewed Courses
                    </h3>
                    <div class="courses-grid" id="recentCoursesGrid">
                        <div class="course-card">
                            <div class="course-image">
                                <i class="fab fa-js-square"></i>
                            </div>
                            <div class="course-info">
                                <h4 class="course-title">Advanced JavaScript</h4>
                                <p class="course-description">Master ES6+ features and async programming</p>
                                <div class="course-progress">
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 75%"></div>
                                    </div>
                                    <span class="progress-text">75%</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="course-card">
                            <div class="course-image">
                                <i class="fab fa-react"></i>
                            </div>
                            <div class="course-info">
                                <h4 class="course-title">React Development</h4>
                                <p class="course-description">Build modern web applications with React</p>
                                <div class="course-progress">
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 50%"></div>
                                    </div>
                                    <span class="progress-text">50%</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="course-card">
                            <div class="course-image">
                                <i class="fab fa-node-js"></i>
                            </div>
                            <div class="course-info">
                                <h4 class="course-title">Node.js Backend</h4>
                                <p class="course-description">Server-side development with Node.js</p>
                                <div class="course-progress">
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 30%"></div>
                                    </div>
                                    <span class="progress-text">30%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Courses Page -->
            <div class="page-content" id="coursesPage">
                <div class="page-header">
                    <h1 class="page-title">
                        <i class="fas fa-book-open"></i>
                        My Courses
                    </h1>
                    <div class="course-toggle">
                        <button class="toggle-btn active" data-type="active">Active Courses</button>
                        <button class="toggle-btn" data-type="completed">Completed</button>
                    </div>
                </div>
                
                <div class="courses-container">
                    <div class="courses-grid" id="activeCoursesList">
                        <!-- Active courses will be loaded here -->
                    </div>
                    <div class="courses-grid" id="completedCoursesList" style="display: none;">
                        <!-- Completed courses will be loaded here -->
                    </div>
                </div>
            </div>

            <!-- Streak Page -->
            <div class="page-content" id="streakPage">
                <div class="page-header">
                    <h1 class="page-title">
                        <i class="fas fa-fire"></i>
                        Learning Streak
                    </h1>
                    <div class="streak-stats">
                        <div class="streak-number" id="currentStreak">15</div>
                        <div class="streak-label">Day Streak</div>
                    </div>
                </div>
                
                <div class="streak-calendar">
                    <div class="calendar-header">
                        <button class="calendar-nav" id="prevMonth">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <h3 class="calendar-month" id="calendarMonth">December 2024</h3>
                        <button class="calendar-nav" id="nextMonth">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                    <div class="calendar-grid" id="calendarGrid">
                        <!-- Calendar will be generated here -->
                    </div>
                </div>
            </div>

            <!-- Catalogue Page -->
            <div class="page-content" id="cataloguePage">
                <div class="page-header">
                    <h1 class="page-title">
                        <i class="fas fa-store"></i>
                        Course Catalogue
                    </h1>
                    <div class="search-bar">
                        <i class="fas fa-search"></i>
                        <input type="text" placeholder="Search courses..." id="courseSearch">
                    </div>
                </div>
                
                <div class="catalogue-filters">
                    <button class="filter-btn active" data-category="all">All Courses</button>
                    <button class="filter-btn" data-category="programming">Programming</button>
                    <button class="filter-btn" data-category="design">Design</button>
                    <button class="filter-btn" data-category="business">Business</button>
                    <button class="filter-btn" data-category="data">Data Science</button>
                </div>
                
                <div class="catalogue-grid" id="catalogueGrid">
                    <!-- Available courses will be loaded here -->
                </div>
            </div>
            
            <!-- Sponsor Dashboard (Hidden by default) -->
            <div class="page-content" id="sponsorDashboardPage" style="display: none;">
                <div class="page-header">
                    <h1 class="page-title">
                        <i class="fas fa-heart"></i>
                        Sponsor Dashboard
                    </h1>
                    <div class="sponsor-actions">
                        <button class="btn-primary" id="makeDonationBtn">
                            <i class="fas fa-gift"></i>
                            Make Donation
                        </button>
                    </div>
                </div>
                
                <div class="welcome-section">
                    <div class="greeting-card">
                        <h2 class="greeting">Welcome back, <span id="sponsorUserName">Sponsor</span>!</h2>
                        <p class="greeting-subtitle">Thank you for supporting education and making dreams come true</p>
                    </div>
                    
                    <div class="sponsor-stats-overview">
                        <div class="sponsor-stats-grid">
                            <div class="stat-item donation-stat">
                                <div class="stat-icon">
                                    <i class="fas fa-heart"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-number" id="totalDonated">$2,450</div>
                                    <div class="stat-label">Total Donated</div>
                                </div>
                            </div>
                            <div class="stat-item students-stat">
                                <div class="stat-icon">
                                    <i class="fas fa-graduation-cap"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-number" id="studentsSupported">18</div>
                                    <div class="stat-label">Students Supported</div>
                                </div>
                            </div>
                            <div class="stat-item impact-stat">
                                <div class="stat-icon">
                                    <i class="fas fa-star"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-number" id="coursesSponsored">24</div>
                                    <div class="stat-label">Courses Sponsored</div>
                                </div>
                            </div>
                            <div class="stat-item badge-stat">
                                <div class="stat-icon">
                                    <i class="fas fa-trophy"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-number" id="sponsorLevel">Gold</div>
                                    <div class="stat-label">Sponsor Level</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recent Donations Section -->
                <section class="recent-donations">
                    <h3 class="section-title">
                        <i class="fas fa-history"></i>
                        Recent Donations
                    </h3>
                    <div class="donations-grid" id="recentDonationsGrid">
                        <!-- Recent donations will be loaded here -->
                    </div>
                </section>

                <!-- Sponsored Students Section -->
                <section class="sponsored-students">
                    <h3 class="section-title">
                        <i class="fas fa-users"></i>
                        Students You're Supporting
                    </h3>
                    <div class="students-grid" id="sponsoredStudentsGrid">
                        <!-- Sponsored students will be loaded here -->
                    </div>
                </section>

                <!-- Impact Tracking -->
                <section class="impact-section">
                    <h3 class="section-title">
                        <i class="fas fa-chart-line"></i>
                        Your Impact
                    </h3>
                    <div class="impact-grid">
                        <div class="impact-card">
                            <div class="impact-visual">
                                <div class="progress-circle" data-progress="73">
                                    <div class="progress-value">73%</div>
                                </div>
                            </div>
                            <div class="impact-info">
                                <h4>Course Completion Rate</h4>
                                <p>Students you sponsor have a 73% completion rate, 23% above average!</p>
                            </div>
                        </div>
                        <div class="impact-card">
                            <div class="impact-visual">
                                <div class="achievement-badges">
                                    <span class="badge gold">🏆</span>
                                    <span class="badge silver">🥈</span>
                                    <span class="badge bronze">🥉</span>
                                </div>
                            </div>
                            <div class="impact-info">
                                <h4>Student Achievements</h4>
                                <p>Your support has helped students earn 45 certificates and achievements</p>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Teacher Dashboard (Hidden by default) -->
            <div class="page-content" id="teacherDashboardPage" style="display: none;">
                <div class="page-header">
                    <h1 class="page-title">
                        <i class="fas fa-chalkboard-teacher"></i>
                        Teacher Dashboard
                    </h1>
                </div>
                
                <div class="welcome-section">
                    <div class="greeting-card">
                        <h2 class="greeting">Welcome back, <span id="teacherUserName">Teacher</span>!</h2>
                        <p class="greeting-subtitle">Manage your courses and track student progress</p>
                    </div>
                    
                    <div class="progress-overview">
                        <div class="teacher-stats">
                            <div class="stat-item">
                                <div class="stat-number" id="totalStudents">156</div>
                                <div class="stat-label">Total Students</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number" id="activeCoursesTaught">8</div>
                                <div class="stat-label">Active Courses</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number" id="avgRating">4.8</div>
                                <div class="stat-label">Avg Rating</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <section class="recent-courses">
                    <h3 class="section-title">
                        <i class="fas fa-chart-line"></i>
                        Course Performance
                    </h3>
                    <div class="courses-grid" id="teacherCoursesGrid">
                        <!-- Teacher courses will be loaded here -->
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Donation Modal -->
    <div class="donation-modal" id="donationModal">
        <div class="modal-overlay" id="donationModalOverlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">
                    <i class="fas fa-gift"></i>
                    Make a Donation
                </h3>
                <button class="modal-close" id="donationModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="donation-form">
                    <div class="donation-type-section">
                        <h4 class="section-title">Choose Donation Type</h4>
                        <div class="donation-type-options">
                            <label class="donation-option">
                                <input type="radio" name="donationType" value="general" checked>
                                <div class="option-card">
                                    <div class="option-icon">🌍</div>
                                    <div class="option-content">
                                        <h5>General Fund</h5>
                                        <p>Support the overall mission</p>
                                    </div>
                                </div>
                            </label>
                            <label class="donation-option">
                                <input type="radio" name="donationType" value="student">
                                <div class="option-card">
                                    <div class="option-icon">🎓</div>
                                    <div class="option-content">
                                        <h5>Sponsor a Student</h5>
                                        <p>Directly support a learner</p>
                                    </div>
                                </div>
                            </label>
                            <label class="donation-option">
                                <input type="radio" name="donationType" value="course">
                                <div class="option-card">
                                    <div class="option-icon">📚</div>
                                    <div class="option-content">
                                        <h5>Course Development</h5>
                                        <p>Fund new course creation</p>
                                    </div>
                                </div>
                            </label>
                        </div>
                    </div>
                    
                    <div class="donation-amount-section">
                        <h4 class="section-title">Donation Amount</h4>
                        <div class="amount-options">
                            <button class="amount-btn" data-amount="25">$25</button>
                            <button class="amount-btn" data-amount="50">$50</button>
                            <button class="amount-btn" data-amount="100">$100</button>
                            <button class="amount-btn" data-amount="250">$250</button>
                        </div>
                        <div class="custom-amount">
                            <label for="customAmount">Custom Amount</label>
                            <div class="amount-input-wrapper">
                                <span class="currency-symbol">$</span>
                                <input type="number" id="customAmount" placeholder="0" min="1" max="10000">
                            </div>
                        </div>
                    </div>
                    
                    <div class="donation-message-section">
                        <h4 class="section-title">Optional Message</h4>
                        <textarea id="donationMessage" placeholder="Add a message of encouragement for students..." rows="3"></textarea>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div class="donation-summary">
                    <span class="summary-text">Donation Amount: <strong id="donationSummaryAmount">$25</strong></span>
                </div>
                <div class="modal-actions">
                    <button class="btn-secondary" id="cancelDonation">Cancel</button>
                    <button class="btn-primary" id="processDonation">
                        <i class="fas fa-heart"></i>
                        Donate Now
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="settings-modal" id="settingsModal">
        <div class="modal-overlay" id="modalOverlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">
                    <i class="fas fa-cog"></i>
                    Settings
                </h3>
                <button class="modal-close" id="modalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="settings-section">
                    <h4 class="settings-section-title">
                        <i class="fas fa-user"></i>
                        Profile Settings
                    </h4>
                    <div class="setting-item">
                        <label class="setting-label">Display Name</label>
                        <input type="text" class="setting-input" id="displayName" placeholder="Enter your display name">
                    </div>
                    <div class="setting-item">
                        <label class="setting-label">Email Notifications</label>
                        <div class="toggle-switch">
                            <input type="checkbox" id="emailNotifications" checked>
                            <span class="toggle-slider"></span>
                        </div>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h4 class="settings-section-title">
                        <i class="fas fa-palette"></i>
                        Appearance
                    </h4>
                    <div class="setting-item">
                        <label class="setting-label">Theme</label>
                        <select class="setting-select" id="themeSelect">
                            <option value="dark">Dark Mode</option>
                            <option value="light">Light Mode</option>
                            <option value="auto">Auto</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label class="setting-label">Animations</label>
                        <div class="toggle-switch">
                            <input type="checkbox" id="animationsToggle" checked>
                            <span class="toggle-slider"></span>
                        </div>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h4 class="settings-section-title">
                        <i class="fas fa-bell"></i>
                        Notifications
                    </h4>
                    <div class="setting-item">
                        <label class="setting-label">Course Updates</label>
                        <div class="toggle-switch">
                            <input type="checkbox" id="courseUpdates" checked>
                            <span class="toggle-slider"></span>
                        </div>
                    </div>
                    <div class="setting-item">
                        <label class="setting-label">Achievement Alerts</label>
                        <div class="toggle-switch">
                            <input type="checkbox" id="achievementAlerts" checked>
                            <span class="toggle-slider"></span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" id="resetSettings">Reset to Default</button>
                <button class="btn-primary" id="saveSettings">Save Changes</button>
            </div>
        </div>
    </div>

    <!-- Dashboard JS -->
    <script src="dashboard.js"></script>
    
    <!-- Initialize App -->
    <script>
        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Load user data and determine dashboard type
            const user = JSON.parse(localStorage.getItem('skillbridge_user') || '{}');
            
            if (user && user.user_type === 'teacher') {
                // Show teacher dashboard
                document.getElementById('dashboardPage').style.display = 'none';
                document.getElementById('teacherDashboardPage').style.display = 'block';
                document.getElementById('teacherDashboardPage').classList.add('active');
                document.getElementById('teacherUserName').textContent = user.username || 'Teacher';
            } else if (user && user.user_type === 'sponsor') {
                // Show sponsor dashboard
                document.getElementById('dashboardPage').style.display = 'none';
                document.getElementById('sponsorDashboardPage').style.display = 'block';
                document.getElementById('sponsorDashboardPage').classList.add('active');
                document.getElementById('sponsorUserName').textContent = user.username || 'Sponsor';
            } else {
                // Show student dashboard (default)
                document.getElementById('userName').textContent = user.username || 'Student';
            }
            
            // Set user initials in profile
            const initials = (user.username || 'S').charAt(0).toUpperCase();
            document.getElementById('userInitials').textContent = initials;
            
            // Setup mobile menu
            const mobileToggle = document.getElementById('mobileMenuToggle');
            const sidebar = document.getElementById('sidebar');
            const glassOverlay = document.getElementById('glassOverlay');
            
            mobileToggle?.addEventListener('click', function() {
                sidebar.classList.toggle('open');
                glassOverlay.classList.toggle('sidebar-open');
            });
            
            glassOverlay?.addEventListener('click', function() {
                sidebar.classList.remove('open');
                glassOverlay.classList.remove('sidebar-open');
            });
            
            // Setup scroll progress
            const mainContent = document.getElementById('mainContent');
            const scrollProgress = document.getElementById('scrollProgress');
            
            mainContent?.addEventListener('scroll', function() {
                const scrollTop = this.scrollTop;
                const scrollHeight = this.scrollHeight - this.clientHeight;
                const scrollPercentage = (scrollTop / scrollHeight) * 100;
                scrollProgress.style.width = scrollPercentage + '%';
            });
        });
    </script>
</body>
</html>